<!doctype html>
<html lang="en"  xmlns:th="http://www.thymeleaf.org/" th:replace="~{ normal/showContactsBase::showBaseFrag(~{::section}) }">
<head>
	<meta charset="UTF-8" />
	<title></title>
</head>
<body>

<section class="main-content">
  <div class="card d-flex flex-column h-100 mx-3">

    <div class="card-header bg-primary text-white text-center">
        <h2 class="text-center">Your Contacts</h2>
    </div>


			<div th:if="${deletedMsg != null}">
				<input type="hidden" id="deletedMsg" th:value="${deletedMsg}" />
				<input type="hidden" id="deletedtoastType" th:value="${toastType}" />
			</div>
							

		<div class="table-responsive">
		<div th:if="${not #lists.isEmpty(userContacts)}" class="card-body flex-grow-1">
        <table class="table table-bordered table-hover">
            <thead class="thead-dark">
                <tr class="table-primary">
                    <th class="text-center" scope="col">#ID</th>
                    <th class="text-center" scope="col">NAME</th>
                    <th class="text-center" scope="col">NICKNAME</th>
                    <th class="text-center" scope="col">EMAIL</th>
                    <th class="text-center" scope="col">NUMBER</th>
                    <th class="text-center" scope="col">WORK</th>
                    <th class="text-center" scope="col">ACTION</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="c : ${userContacts}" class="table-primary text-center">
                    <th th:text="${'SCM'+#temporals.year(c.cAddedDate)+'_'+c.cId}" scope="row"></th>
                    <td>
                    
                    <img th:if="${c.cImgName != 'contact.png'}" class="profile_picture" th:src="@{'/Images/'+${c.cImgName}}" alt="profile-image" />
					<span th:unless="${c.cImgName != 'contact.png'}" class="profile_icon" th:alt="profile-image" ><i class="fa-solid fa-user"></i></span>
					
                    <span th:text="${c.cName}"></span> 
                    </td>
                    <td th:text="${c.cNikName}"></td>
                    <td><a class="text-dark" th:href="@{'/user/contactProfile/'+${c.cId}}"><span th:text="${c.cEmail}"></span></a></td>
                    <td th:text="${c.cNumber}"></td>
                    <td th:text="${c.cWork}"></td>
                    <td class="tableButton d-flex justify-content-center align-items-stretch">
                    <div class="d-flex tableButtonDiv">

					<form th:action="@{'/user/updateContact/'+${c.cId}}" method="post">
						<button type="submit" class="btn btn-primary m-1 btn-sm">Update</button>
					</form>
						<a th:href="@{'/user/deleteContact/'+${c.cId}}" class="btn btn-danger m-1 btn-sm">Delete</a>
                    </div>
                    </td>
                </tr>
            </tbody>
        </table>

				<nav aria-label="Page navigation example">
					<ul class="pagination">
						<li th:if="${currentPage != 0}" class="page-item">
						<a class="page-link" th:href="@{'/user/showContacts/'+${currentPage - 1}}"
							aria-label="Previous" > <span aria-hidden="true">&laquo;</span>
								
								<span class="sr-only">Previous</span>
						</a></li>

						<li th:classappend="${currentPage == i-1 ? 'active' : '' }"
							th:each="i : ${#numbers.sequence(1,totalPages)}"
							class="page-item"><a th:href="@{'/user/showContacts/'+${i-1}}" class="page-link"><span th:text="${i}"></span></a></li>

						<li th:if="${currentPage + 1 != totalPages}" class="page-item"><a th:href="@{'/user/showContacts/'+${currentPage + 1}}" class="page-link"
							aria-label="Next"> <span aria-hidden="true">&raquo;</span> <span
								class="sr-only">Next</span>
						
						</a></li>
					</ul>
				</nav>



			</div>
		</div>

  <div th:unless="${not #lists.isEmpty(userContacts)}"
         class="card-body flex-grow-1 d-flex flex-column justify-content-center align-items-center text-center">

         <img th:src="@{/Images/noContacts.png}" alt="No Contacts" class="mb-2" />

        <p class="h5 text-muted">You don't have any contacts to show.</p>
        <a th:href="@{/user/addContact}" class="btn btn-primary mt-2 btn-sm">Add New Contact</a>
    </div>

  </div>
  
  
  
 
  
  
  
  
</section>


	
</body>
</html>