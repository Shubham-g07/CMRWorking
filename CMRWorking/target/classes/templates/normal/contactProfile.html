<!doctype html>
<html lang="en"  xmlns:th="http://www.thymeleaf.org/" th:replace="~{ normal/base::baseFrag(~{::section}) }">
<head>
	<meta charset="UTF-8" />
	<title></title>
</head>
<body>

<section class="main-content">
    <div th:if="${contact}" class="card d-flex flex-column h-100 mx-3">

        <!-- Card Header with Contact Name -->
        <div class="card-header bg-primary text-white text-center">
            <h2 class="my-0" th:text="${contact.cName}">Contact Name</h2>
        </div>
		
		<div th:if="${updateMsg != null}">
				<input type="hidden" id="updateMsg" th:value="${updateMsg}" />
				<input type="hidden" id="updatedtoastType" th:value="${toastType}" />
			</div>


        <!-- Card Body for Contact Details -->
        <div class="card-body flex-grow-1 p-4">
            <div class="row">
                <!-- Left Column: Contact Photo and Basic Info -->
					<div
						class="col-md-4 d-flex flex-column align-items-center text-center mb-4 mb-md-0">
						<!-- Profile Picture or Default Icon -->
						<div class="profile-image-container mb-3">
							<img
								th:if="${contact.cImgName != null and contact.cImgName != 'contact.png'}"
								class="contact_Profile_Image rounded-circle border border-secondary"
								th:src="@{'/Images/' + ${contact.cImgName}}" alt="profile-image" />
							<span
								th:unless="${contact.cImgName != null and contact.cImgName != 'contact.png'}"
								class="profile_icon border border-secondary rounded-circle d-flex justify-content-center align-items-center"
								style="width: 120px; height: 120px; font-size: 4rem; color: #6c757d;"
								alt="profile-image"> <i class="fa-solid fa-user"></i>
							</span>
						</div>

						<h3 class="mb-1" th:text="${contact.cName}">John Doe</h3>
						<p class="text-muted"
							th:if="${contact.cNikName != null and contact.cNikName != ''}"
							th:text="${'(' + contact.cNikName + ')'}"></p>
						<p class="text-muted"
							th:unless="${contact.cNikName != null and contact.cNikName != ''}">No
							Nickname</p>

						<span th:if="${contact.cIsFav}"
							class="badge bg-warning text-dark mt-2">Favorite Contact</span>

						<div class="mt-3 d-flex">
							<form th:action="@{'/user/updateContact/'+${contact.cId}}"
								method="post" class="me-2">
								<button type="submit" class="btn btn-primary btn-sm">Update Contact</button>
							</form>

							<a th:href="@{'/user/deleteContact/' + ${contact.cId}}"
								class="btn btn-danger btn-sm">Delete Contact</a>
						</div>
					</div>

					<!-- Right Column: Detailed Contact Information -->
                <div class="col-md-8">
                    <h4 class="mb-3 text-primary">Contact Details</h4>
                    <dl class="row">
                        <dt class="col-sm-3">Email:</dt>
                        <dd class="col-sm-9"><a th:href="${'mailto:' + contact.cEmail}" th:text="${contact.cEmail}" class="text-dark text-decoration-none"></a></dd>

                        <dt class="col-sm-3">Phone:</dt>
                        <dd class="col-sm-9" th:text="${contact.cNumber}"></dd>

                        <dt class="col-sm-3">Work:</dt>
                        <dd class="col-sm-9" th:text="${contact.cWork}"></dd>

                        <dt class="col-sm-3">Address:</dt>
                        <dd class="col-sm-9" th:text="${contact.cAddress}"></dd>

                        <dt class="col-sm-3">Important Dates:</dt>
                        <dd class="col-sm-9" th:text="${contact.cImpDates}"></dd>
                        
                        <dt class="col-sm-3">Added On:</dt>
                        <dd class="col-sm-9" th:text="${#temporals.format(contact.cAddedDate, 'dd MMMM yyyy')}"></dd>

                        <dt class="col-sm-3">Last Updated:</dt>
                        <dd class="col-sm-9" th:text="${#temporals.format(contact.cUpdateedDate, 'dd MMMM yyyy HH:mm')}"></dd>
                    </dl>

                    <h4 class="mb-3 text-primary mt-4">Description</h4>
                    <p th:text="${contact.cDesc}"></p>
                </div>
            </div>
        </div>
    </div>
    
    
    <div th:unless="${contact}">
    
    <h1 class="text-center p-2 mx-3 bg-danger text-light" >You don't have permission to see this contact.</h1>
    
    </div>
    

    
</section>


	
</body>
</html>